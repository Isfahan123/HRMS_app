{% extends "base.html" %}

{% block title %}HRMS Admin Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container admin">
    <header class="dashboard-header">
        <h1>Admin Dashboard - Welcome, {{ full_name or user_email }}</h1>
        <a href="/logout" class="logout-button">ğŸ”’ Logout</a>
    </header>
    
    <div class="tabs">
        <button class="tab-button active" data-tab="home">ğŸ  Home</button>
        <button class="tab-button" data-tab="profile">ğŸ‘¤ Profile Management</button>
        <button class="tab-button" data-tab="attendance">ğŸ“… Attendance Management</button>
        <button class="tab-button" data-tab="leave">ğŸ“¬ Leave Management</button>
        <button class="tab-button" data-tab="payroll">ğŸ’¸ Payroll Management</button>
        <button class="tab-button" data-tab="salary-history">ğŸ’° Salary History</button>
        <button class="tab-button" data-tab="bonus">ğŸ Bonus Management</button>
        <button class="tab-button" data-tab="training">ğŸ“š Training Courses</button>
        <button class="tab-button" data-tab="overseas">âœˆï¸ Overseas Trips</button>
        <button class="tab-button" data-tab="tax">ğŸ“Š Tax Configuration</button>
    </div>
    
    <div class="tab-content">
        <div id="home-tab" class="tab-pane active">
            <div class="admin-summary">
                <h2>System Overview</h2>
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Total Employees</h3>
                        <p id="total-employees">Loading...</p>
                    </div>
                    <div class="summary-card">
                        <h3>Pending Leave Requests</h3>
                        <p id="pending-leaves">Loading...</p>
                    </div>
                    <div class="summary-card">
                        <h3>Today's Attendance</h3>
                        <p id="today-attendance">Loading...</p>
                    </div>
                    <div class="summary-card">
                        <h3>Payroll Status</h3>
                        <p id="payroll-status">Up to date</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="profile-tab" class="tab-pane">
            {% include 'admin_profile.html' %}
        </div>
        
        <div id="attendance-tab" class="tab-pane">
            {% include 'admin_attendance.html' %}
        </div>
        
        <div id="leave-tab" class="tab-pane">
            {% include 'admin_leave.html' %}
        </div>
        
        <div id="payroll-tab" class="tab-pane">
            {% include 'admin_payroll.html' %}
        </div>
        
        <div id="salary-history-tab" class="tab-pane">
            {% include 'admin_salary_history.html' %}
        </div>
        
        <div id="bonus-tab" class="tab-pane">
            {% include 'admin_bonus.html' %}
        </div>
        
        <div id="training-tab" class="tab-pane">
            {% include 'admin_training.html' %}
        </div>
        
        <div id="overseas-tab" class="tab-pane">
            {% include 'admin_trips.html' %}
        </div>
        
        <div id="tax-tab" class="tab-pane">
            {% include 'admin_tax_config.html' %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Tab switching functionality
document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', () => {
        const tabName = button.getAttribute('data-tab');
        
        // Remove active class from all tabs and buttons
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
        
        // Add active class to clicked button and corresponding tab
        button.classList.add('active');
        document.getElementById(tabName + '-tab').classList.add('active');
        
        // Load data for the tab if needed
        loadTabData(tabName);
    });
});

// Load admin summary data
async function loadAdminSummary() {
    try {
        // These would be actual API calls in production
        document.getElementById('total-employees').textContent = 'Loading...';
        document.getElementById('pending-leaves').textContent = 'Loading...';
        document.getElementById('today-attendance').textContent = 'Loading...';
    } catch (error) {
        console.error('Error loading admin summary:', error);
    }
}

function loadTabData(tabName) {
    // Implement lazy loading of tab data as needed
    console.log('Loading admin data for tab:', tabName);
}

// Load initial data
loadAdminSummary();
</script>
{% endblock %}
